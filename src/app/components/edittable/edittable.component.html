<p-toast></p-toast>
<!-- <div class="card">

</div> -->
<!-- [resizableColumns]="true" -->
<p-table   [value]="usersData"  styleClass="p-column-resizer-helper" editMode="row" [columns]="cols" [resizableColumns]="true"
       responsiveLayout="scroll" [responsive]="true" 
        [paginator]="true" [rows]="10" [showCurrentPageReport]="true" styleClass="p-datatable-gridlines"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" 
        [globalFilterFields]="['Id','username','PhoneNumber','Email','Role']">
        <ng-template pTemplate="caption">
            <div class="p-grid p-fluid p-formgrid">
                <div class=" p-md-6 p-sm-6 p-lg-6">
                    <span>
                        <input type="text"  pInputText size="50" class="p-inputtext-lg"
                        placeholder="Filter" (input)="datatable.filterGlobal($event.target.value, 'contains')"/>
                    </span>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns let i=index" [ngStyle]="{'width': col.width }"
                    [pSortableColumn]="col.field">
                    {{col.header}}
                </th>
            </tr>
        </ng-template>
        <!-- <ng-template pTemplate="header" >
            
            <tr >
                <th>ID</th>
                <th >User Name</th>
                <th>Phone Number</th>
                <th>Email</th>
                <th >Role</th>
                <th style="width:8rem">Action</th>
            </tr>
        </ng-template> -->
        <ng-template pTemplate="body" let-data let-editing="editing" let-ri="rowIndex" >
            <tr [pEditableRow]="data" >
                <td > <span class="p-column-title">ID</span>{{data.Id}}</td>
                <td pEditableColumn>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="data.username" required>
                        </ng-template>
                        <ng-template pTemplate="output">
                            <span class="p-column-title">User Name</span> {{data.username}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn >
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="data.PhoneNumber" required>
                        </ng-template>
                        <ng-template pTemplate="output">
                            <span class="p-column-title">Phone Number</span> {{data.PhoneNumber}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn >
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="data.Email" required>
                        </ng-template>
                        <ng-template pTemplate="output">
                            <span class="p-column-title">Email</span> {{data.Email}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn>
                    <span class="p-column-title" >Role</span> {{data.Role}}
                </td>
                <td >
                    <span class="p-column-title">Action</span>
                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                        (click)="onRowEditInit(data)" class="p-button-rounded p-button-text"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                        (click)="onRowEditSave(data)"
                        class="p-button-rounded p-button-text p-button-success p-mr-2"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                        class="p-button-rounded p-button-text p-button-danger"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>
<!-- <p-table #datatable [columns]='' class="p-element" responsiveLayout="stack" [value]="usersData" dataKey="edit" editMode="row" 
    [paginator]="true" [rows]="10"  [showCurrentPageReport]="true" 
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"   styleClass="p-datatable-lg"
       [tableStyle]="{'min-width': '50rem'}"
        [globalFilterFields]="['Id','username','PhoneNumber','Email','Role']">
            <ng-template pTemplate="caption">   
                <div style="text-align: right">
                    <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                    <input type="text" class="pi pi-search" pInputText size="50" class="p-inputtext-lg" placeholder="Global Filter"
                        (input)="datatable.filterGlobal($event.target.value, 'contains')" style="width:auto" />
                </div>
            </ng-template>
            <ng-template pTemplate="header" let-columns >
                <tr>
                    <th style="width:15%">ID</th>
                    <th style="width:15%">User Name</th>
                    <th style="width:15%">Phone Number</th>
                    <th style="width:20%">Email</th>
                    <th style="width:15%"> Role</th>
                    <th style="width:8%"> Action</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-data let-editing="editing" let-ri="rowIndex" let-columns="columns">
                <tr [pEditableRow]="data" style="cursor: pointer;" class="textCenter">
                    <td>{{data.Id}}</td>
                    <td pEditableColumn>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input pInputText type="text" [(ngModel)]="data.username">
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{data.username}}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td pEditableColumn>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input pInputText type="text" [(ngModel)]="data.PhoneNumber">
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{data.PhoneNumber}}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td pEditableColumn>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input pInputText type="text" [(ngModel)]="data.Email">
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{data.Email}}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td pEditableColumn>
                        {{data.Role}}
                    </td>
                    <td style="text-align:center">
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                            (click)="onRowEditInit(data)" class="p-button-rounded p-button-text"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                            (click)="onRowEditSave(data)"
                            class="p-button-rounded p-button-text p-button-success p-mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                            class="p-button-rounded p-button-text p-button-danger"></button>
                    </td>
                </tr>
            </ng-template>
    </p-table> -->

<!-- <div class="card">
        <p-table responsiveLayout="scroll" [scrollable]="true" scrollHeight="flex" [responsive]="true" [value]="usersData"
        [paginator]="true" [rows]="10" >
            <ng-template pTemplate="caption">
                Stack
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th >ID</th>
                    <th>User Name</th>
                    <th >Phone Number</th>
                    <th >Email</th>
                    <th > Role</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-data let-columns="columns" let-rowData="rowData" sortMode="multiple">
                <tr>
                    <td><span class="p-column-title">Name</span>{{data.Id}}</td>
                    <td><span class="p-column-title">Price</span>{{data.username}}</td>
                    <td><span class="p-column-title">Category</span>{{data.PhoneNumber}}</td>
                    <td><span class="p-column-title">Quantity</span>{{data.Email}}</td>
                    <td><span class="p-column-title">Status</span> {{data.Role}}</td>
                    
                </tr>
            </ng-template>
        </p-table>
    </div> -->